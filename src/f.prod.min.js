(function(o,k,m,q){function n(d,a){return r.hasOwnProperty.call(d,a)}function g(d){return p.call(d)==="[object Function]"}function i(d){return p.call(d)==="[object String]"}function a(d){return p.call(d)==="[object Number]"}function b(d){return d===null}function e(d){return d===q}function l(d){for(var a=s.slice.call(arguments,1),c=a.length,b=0,e,g;b<c;b++)for(g in e=a[b],e)d[g]=a[b][g];return d}function h(d){return d.replace(/\\\\/g,"\\").replace(/\\'/g,"'")}function j(d){var a=[],c,b={isResolved:function(){return!a},
done:function(d){g(d)&&(a?a.push(d):d(c));return this},resolve:function(d){if(a){var b=a,e=0,g=b.length;c=d;for(a=null;e<g;e++)b[e](d)}}};g(d)&&d(b);return b}function t(d){var a=new j,c=new j,b={resolve:function(){if(c.isResolved())return false;a.resolve.apply(null,arguments)},reject:function(){if(a.isResolved())return false;c.resolve.apply(null,arguments)},done:function(){a.done.apply(null,arguments);return this},fail:function(){c.done.apply(null,arguments);return this}};g(d)&&d(b);return b}var r=
Object.prototype,s=Array.prototype,v=s.slice,p=r.toString;if(typeof Object.create!=="function")Object.create=function(d){function a(){}a.prototype=d;return new a};var c={utils:{},events:{},Model:{},View:{}},u=Array.isArray||function(d){return p.call(d)==="[object Array]"};c.utils.chain=c.chain=function(){function d(){var c=a.shift(),b=Array.prototype.slice.call(arguments);b.push(d);p.call(c)==="[object Function]"&&c.apply(c,b)}var a=Array.prototype.slice.call(arguments);d()};c.utils.Throttle=c.Throttle=
function(d){var a,c;return{exec:function(b){var e=+new Date;if(!g(b))return false;c?(clearTimeout(a),e-c>d?(b(),c=e):a=setTimeout(function(){b();a=null;c=e},d)):(b(),c=e)}}};c.utils.Deferred=c.Deferred=t;c.utils.when=c.when=function(d){function a(){--e||c.resolve()}for(var c=new t,b=d.length,e=b;b--;)d[b].done(a);return c};c.utils.makeArr=c.makeArr=function(d){return v.call(d)};c.utils.bind=c.bind=function(d,a){return function(){d.apply(a,arguments)}};c.utils.extend=c.extend=function(a,c){var b,e=
function(){};b=function(a,d,c){var b;b=d&&n(d,"constructor")?d.constructor:function(){a.apply(this,arguments)};l(b,a);e.prototype=a.prototype;b.prototype=new e;d&&l(b.prototype,d);c&&l(b,c);b.prototype.constructor=b;b.__super__=a.prototype;return b}(this,a,c);b.extend=this.extend;return b};c.utils.copyClone=c.copyClone=l;c.utils.isFunction=c.isFunction=g;c.utils.isString=c.isString=i;c.utils.isNumber=c.isNumber=a;c.utils.isArray=c.isArray=u;c.utils.isNull=c.isNull=b;c.utils.isUndefined=c.isUndefined=
e;c.utils.isEmpty=c.isEmpty=function(d){var c;if(g(d))return false;else if(a(d))return false;else if(u(d)||i(d))return d.length===0;else if(b(d))return true;else if(e(d))return true;for(c in d)if(n(d,c))return false;return true};c.utils.hasProp=c.hasProp=n;c.utils.template=c.template=function(a,b,e){var g,l,i,j;e||(e={});i=/<%([\s\S]+?)%>/g;g=/<%=([\s\S]+?)%>/g;l=/<%-([\s\S]+?)%>/g;a=["var __f = [];",e.throughErr?"try {":"","with (obj || {}) {__f.push('",function(a){a=a.replace(/\\/g,"\\\\");a=a.replace(/\'/g,
"\\'");a=a.replace(g||noMatch,function(a,b){return"', f.utils.entity("+h(b)+"), '"});a=a.replace(l||noMatch,function(a,b){return"', "+h(b)+", '"});a=a.replace(i||noMatch,function(a,b){return"'); "+h(b).replace(/[\r\n\t]/g," ")+"; __f.push('"});a=a.replace(/\n/g,"\\n");a=a.replace(/\r/g,"\\r");return a=a.replace(/\t/g,"\\t")}(a),"');}",e.throughErr?"} catch (e) {}":"",'return __f.join("");'].join("");j=new Function("obj","f",a);return b?j(b,c):function(a){return j.call(this,a,c)}};c.utils.getParams=
function(a){var b={},c=0,e,a=a.split("&");for(e=a.length;c<e;c++)tmp2=a[c].split("="),b[tmp2[0]]=tmp2[1];return b};c.utils.entity=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};c.utils.unentity=function(a){return(""+a).replace(/&amp;/g,"&").replace(/&#x26;/g,"&").replace(/&#38;/g,"&").replace(/&lt;/g,"<").replace(/&#x3c;/g,"<").replace(/&#60;/g,"<").replace(/&gt;/g,">").replace(/&#x3e;/g,
">").replace(/&#62;/g,">").replace(/&quout;/g,'"').replace(/&#x22;/g,'"').replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")};c.utils.unescape=h;m.f=c})(window,document,window);
(function(o){function k(){}k.prototype=function(){function m(g,i){if(!g)throw"INVALID EVENT TYPE "+g;var a=this.handlers||(this.handlers={}),b=[].concat(a[g]||[]),e=i||{},l,h,j;e.type||(e.type=g);for(h=0,l=b.length;h<l;++h)(j=b[h][0])&&j.call(b[h][1]||this,this,e);b=a["*"]||[];for(h=0,l=b.length;h<l;++h)(j=b[h][0])&&j.call(b[h][1]||this,this,e)}function k(g,i,a){if(!g)throw"addEventListener:INVALID EVENT TYPE "+g+" "+i;var b=this.handlers||(this.handlers={});(b[g]||(b[g]=[])).push([i,a])}function n(g,
i){if(!g)throw"removeEventListener:INVALID EVENT TYPE "+g+" "+fn;for(var a=(this.handlers||(this.handlers={}))[g]||[],b=a.length;b;)a[--b][0]===i&&a.splice(b,1)}return{dispatchEvent:m,trigger:m,pub:m,addEventListener:k,bind:k,sub:k,on:k,removeEventListener:n,unbind:n,off:n,one:function(g,i,a){function b(){e.removeEventListener(g,b,a);i.apply(a||e,arguments)}var e=this;this.addEventListener(g,b,a)}}}();o.events.EventDispatcher=k})(f,window,document,window);
(function(o){function k(a,b){this.init.apply(this,arguments)}function m(a,b){this.init.apply(this,arguments)}var q=0,n=o.events.EventDispatcher,g=o.utils,i=g.copyClone,g=g.extend;k.fn=k.prototype;i(k.prototype,n.prototype,{init:function(a,b){var e=$.isPlainObject(a)?a:{};this.id=e.id?e.id:"id"+ ++q;this.defaults&&i(e,this.defaults);this.set(e,{silent:true});this._previousAttributes=i({},this.attributes);$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},hasChanged:function(){return!isEmpty(this._changed)},
change:function(a){var b;a||(a={});if(this._changing||!this.hasChanged())return false;this._changing=true;if(!a.silent)for(b in this.trigger("change",this._changed),this._changed)a={},a[b]=this._changed[b],this.trigger("change:"+b,a);this._previousAttributes=i({},this.attributes);this._changed=null;delete this._changed;this._changing=false},set:function(a,b,e){var g,h,i=this.attributes||(this.attributes={});this._changed||(this._changed={});$.isPlainObject(a)?(h=a,e=b):(h={},h[a]=b);for(g in h)i[g]!==
h[g]&&(i[g]=h[g],this._changed[g]=h[g]);this.hasChanged()&&this.change(e)},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return i({},this._previousAttributes)},get:function(a){return this.attributes[a]}});m.fn=m.prototype;i(m.prototype,n.prototype,{tagName:"div",className:"",init:function(a,b){var e;e=$.isPlainObject(a)?a:{};var g,h,j;this.id=e.id?e.id:"id"+ ++q;this.events||(this.events=$.isPlainObject(e.events)?
e.events:{});i(this,e);this.el?this.setElement(e.el,false):(e=document.createElement(this.tagName),$(e).addClass(this.className),this.setElement(e,false));for(h in this.events)g=h.match(/^(\S+)\s*(.*)$/),e=g[1],g=g[2],j=this.events[h],$.isFunction(j)||(j=this[this.events[h]]),this.$el.delegate(g,e,$.proxy(j,this));$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},initialize:function(){},$:function(a){return this.$el.find(a)},setElement:function(a){this.$el=$(a);this.el=this.$el[0];
return this},render:function(){return this}});k.extend=m.extend=g;o.Model=k;o.View=m})(f,window,document,window);
