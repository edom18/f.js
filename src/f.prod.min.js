(function(o,k,m,p){function n(h,a){return j.hasOwnProperty.call(h,a)}function e(h){return q.call(h)==="[object Function]"}function i(h){return q.call(h)==="[object String]"}function a(h){return q.call(h)==="[object Number]"}function d(h){return h===null}function c(h){return h===p}function l(h){for(var a=r.slice.call(arguments,1),b=a.length,d=0,c,g;d<b;d++)for(g in c=a[d],c)h[g]=a[d][g];return h}function g(h){return h.replace(/\\\\/g,"\\").replace(/\\'/g,"'")}var j=Object.prototype,r=Array.prototype,
t=r.slice,q=j.toString;if(typeof Object.create!=="function")Object.create=function(h){function a(){}a.prototype=h;return new a};var b={utils:{},events:{},Model:{},View:{}},s=Array.isArray||function(h){return q.call(h)==="[object Array]"};b.utils.Throttle=b.Throttle=function(h){var a,b;return{exec:function(d){var c=+new Date;if(!e(d))return false;b?(clearTimeout(a),c-b>h?(d(),b=c):a=setTimeout(function(){d();a=null;b=c},h)):(d(),b=c)}}};b.utils.Deferred=b.Deferred=function(a){var b=[],d,c={done:function(a){e(a)&&
(b?b.push(a):a(d))},resolve:function(a){var h=b,c=0,g=h.length;d=a;for(b=null;c<g;c++)h[c](a)}};e(a)&&a(c);return c};b.utils.makeArr=b.makeArr=function(a){return t.call(a)};b.utils.bind=b.bind=function(a,b){return function(){a.apply(b,arguments)}};b.utils.extend=b.extend=function(a,b){var c,d=function(){};c=function(a,b,c){var h;h=b&&n(b,"constructor")?b.constructor:function(){a.apply(this,arguments)};l(h,a);d.prototype=a.prototype;h.prototype=new d;b&&l(h.prototype,b);c&&l(h,c);h.prototype.constructor=
h;h.__super__=a.prototype;return h}(this,a,b);c.extend=this.extend;return c};b.utils.copyClone=b.copyClone=l;b.utils.isFunction=b.isFunction=e;b.utils.isString=b.isString=i;b.utils.isNumber=b.isNumber=a;b.utils.isArray=b.isArray=s;b.utils.isNull=b.isNull=d;b.utils.isUndefined=b.isUndefined=c;b.utils.isEmpty=b.isEmpty=function(b){var g;if(e(b))return false;else if(a(b))return false;else if(s(b)||i(b))return b.length===0;else if(d(b))return true;else if(c(b))return true;for(g in b)if(n(b,g))return false;
return true};b.utils.hasProp=b.hasProp=n;b.utils.template=b.template=function(a,c,d){var e,l,i,j;d||(d={});i=/<%([\s\S]+?)%>/g;e=/<%=([\s\S]+?)%>/g;l=/<%-([\s\S]+?)%>/g;a=["var __f = [];",d.throughErr?"try {":"","with (obj || {}) {__f.push('",function(a){a=a.replace(/\\/g,"\\\\");a=a.replace(/\'/g,"\\'");a=a.replace(e||noMatch,function(a,b){return"', f.utils.entity("+g(b)+"), '"});a=a.replace(l||noMatch,function(a,b){return"', "+g(b)+", '"});a=a.replace(i||noMatch,function(a,b){return"'); "+g(b).replace(/[\r\n\t]/g,
" ")+"; __f.push('"});a=a.replace(/\n/g,"\\n");a=a.replace(/\r/g,"\\r");return a=a.replace(/\t/g,"\\t")}(a),"');}",d.throughErr?"} catch (e) {}":"",'return __f.join("");'].join("");j=new Function("obj","f",a);return c?j(c,b):function(a){return j.call(this,a,b)}};b.utils.getParams=function(a){var b={},c=0,d,a=a.split("&");for(d=a.length;c<d;c++)tmp2=a[c].split("="),b[tmp2[0]]=tmp2[1];return b};b.utils.entity=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,
"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};b.utils.unentity=function(a){return(""+a).replace(/&amp;/g,"&").replace(/&#x26;/g,"&").replace(/&#38;/g,"&").replace(/&lt;/g,"<").replace(/&#x3c;/g,"<").replace(/&#60;/g,"<").replace(/&gt;/g,">").replace(/&#x3e;/g,">").replace(/&#62;/g,">").replace(/&quout;/g,'"').replace(/&#x22;/g,'"').replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")};b.utils.unescape=g;m.f=b})(window,document,window);
(function(o){function k(){}k.prototype=function(){function m(e,i){if(!e)throw"INVALID EVENT TYPE "+e;var a=this.handlers||(this.handlers={}),d=[].concat(a[e]||[]),c=i||{},l,g,j;c.type||(c.type=e);for(g=0,l=d.length;g<l;++g)(j=d[g][0])&&j.call(d[g][1]||this,this,c);d=a["*"]||[];for(g=0,l=d.length;g<l;++g)(j=d[g][0])&&j.call(d[g][1]||this,this,c)}function k(e,i,a){if(!e)throw"addEventListener:INVALID EVENT TYPE "+e+" "+i;var d=this.handlers||(this.handlers={});(d[e]||(d[e]=[])).push([i,a])}function n(e,
i){if(!e)throw"removeEventListener:INVALID EVENT TYPE "+e+" "+fn;for(var a=(this.handlers||(this.handlers={}))[e]||[],d=a.length;d;)a[--d][0]===i&&a.splice(d,1)}return{dispatchEvent:m,trigger:m,pub:m,addEventListener:k,bind:k,sub:k,on:k,removeEventListener:n,unbind:n,off:n,one:function(e,i,a){function d(){c.removeEventListener(e,d,a);i.apply(a||c,arguments)}var c=this;this.addEventListener(e,d,a)}}}();o.events.EventDispatcher=k})(f,window,document,window);
(function(o){function k(a,d){this.init.apply(this,arguments)}function m(a,d){this.init.apply(this,arguments)}var p=0,n=o.events.EventDispatcher,e=o.utils,i=e.copyClone,e=e.extend;k.fn=k.prototype;i(k.prototype,n.prototype,{init:function(a,d){var c=$.isPlainObject(a)?a:{};this.id=c.id?c.id:"id"+ ++p;this.defaults&&i(c,this.defaults);this.set(c,{silent:true});this._previousAttributes=i({},this.attributes);$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},hasChanged:function(){return!isEmpty(this._changed)},
change:function(a){var d;a||(a={});if(this._changing||!this.hasChanged())return false;this._changing=true;if(!a.silent)for(d in this.trigger("change",this._changed),this._changed)a={},a[d]=this._changed[d],this.trigger("change:"+d,a);this._previousAttributes=i({},this.attributes);this._changed=null;delete this._changed;this._changing=false},set:function(a,d,c){var e,g,i=this.attributes||(this.attributes={});this._changed||(this._changed={});$.isPlainObject(a)?(g=a,c=d):(g={},g[a]=d);for(e in g)i[e]!==
g[e]&&(i[e]=g[e],this._changed[e]=g[e]);this.hasChanged()&&this.change(c)},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return i({},this._previousAttributes)},get:function(a){return this.attributes[a]}});m.fn=m.prototype;i(m.prototype,n.prototype,{tagName:"div",className:"",init:function(a,d){var c;c=$.isPlainObject(a)?a:{};var e,g,j;this.id=c.id?c.id:"id"+ ++p;this.events||(this.events=$.isPlainObject(c.events)?
c.events:{});i(this,c);this.el?this.setElement(c.el,false):(c=document.createElement(this.tagName),$(c).addClass(this.className),this.setElement(c,false));for(g in this.events)e=g.match(/^(\S+)\s*(.*)$/),c=e[1],e=e[2],j=this.events[g],$.isFunction(j)||(j=this[this.events[g]]),this.$el.delegate(e,c,$.proxy(j,this));$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},initialize:function(){},$:function(a){return this.$el.find(a)},setElement:function(a){this.$el=$(a);this.el=this.$el[0];
return this},render:function(){return this}});k.extend=m.extend=e;o.Model=k;o.View=m})(f,window,document,window);
