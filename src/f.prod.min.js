(function(n,j,l,p){function m(b,a){return r.hasOwnProperty.call(b,a)}function g(b){return q.call(b)==="[object Function]"}function i(b){return q.call(b)==="[object String]"}function a(b){return q.call(b)==="[object Number]"}function e(b){return b===null}function d(b){return b===p}function k(b){for(var a=s.slice.call(arguments,1),c=a.length,e=0,d,h;e<c;e++)for(h in d=a[e],d)b[h]=a[e][h];return b}function h(b){return b.replace(/\\\\/g,"\\").replace(/\\'/g,"'")}function o(b){var a=[],e,c={done:function(b){g(b)&&
(a?a.push(b):b(e))},resolve:function(b){var c=a,d=0,h=c.length;e=b;for(a=null;d<h;d++)c[d](b)}};b(c);return c}var r=Object.prototype,s=Array.prototype,v=s.slice,q=r.toString;if(typeof Object.create!=="function")Object.create=function(b){function a(){}a.prototype=b;return new a};var c={utils:{},events:{},Model:{},View:{}},t=Array.isArray||function(b){return q.call(b)==="[object Array]"},u=new o(function(b){b.done(function(b){console.log(b)})});setTimeout(function(){u.resolve("hoge");u.done(function(){console.log("after hoge")})},
5E3);c.utils.Deferred=c.Deferred=o;c.utils.makeArr=c.makeArr=function(b){return v.call(b)};c.utils.bind=c.bind=function(b,a){return function(){b.apply(a,arguments)}};c.utils.extend=c.extend=function(b,a){var c,e=function(){};c=function(b,a,c){var d;d=a&&m(a,"constructor")?a.constructor:function(){b.apply(this,arguments)};k(d,b);e.prototype=b.prototype;d.prototype=new e;a&&k(d.prototype,a);c&&k(d,c);d.prototype.constructor=d;d.__super__=b.prototype;return d}(this,b,a);c.extend=this.extend;return c};
c.utils.copyClone=c.copyClone=k;c.utils.isFunction=c.isFunction=g;c.utils.isString=c.isString=i;c.utils.isNumber=c.isNumber=a;c.utils.isArray=c.isArray=t;c.utils.isNull=c.isNull=e;c.utils.isUndefined=c.isUndefined=d;c.utils.isEmpty=c.isEmpty=function(b){var c;if(g(b))return false;else if(a(b))return false;else if(t(b)||i(b))return b.length===0;else if(e(b))return true;else if(d(b))return true;for(c in b)if(m(b,c))return false;return true};c.utils.hasProp=c.hasProp=m;c.utils.template=c.template=function(b,
a,d){var e,g,k,i;d||(d={});k=/<%([\s\S]+?)%>/g;e=/<%=([\s\S]+?)%>/g;g=/<%-([\s\S]+?)%>/g;b=["var __f = [];",d.throughErr?"try {":"","with (obj || {}) {__f.push('",function(a){a=a.replace(/\\/g,"\\\\");a=a.replace(/\'/g,"\\'");a=a.replace(e||noMatch,function(a,b){return"', f.utils.entity("+h(b)+"), '"});a=a.replace(g||noMatch,function(a,b){return"', "+h(b)+", '"});a=a.replace(k||noMatch,function(a,b){return"'); "+h(b).replace(/[\r\n\t]/g," ")+"; __f.push('"});a=a.replace(/\n/g,"\\n");a=a.replace(/\r/g,
"\\r");return a=a.replace(/\t/g,"\\t")}(b),"');}",d.throughErr?"} catch (e) {}":"",'return __f.join("");'].join("");i=new Function("obj","f",b);return a?i(a,c):function(a){return i.call(this,a,c)}};c.utils.getParams=function(a){var d={},c=0,e,a=a.split("&");for(e=a.length;c<e;c++)tmp2=a[c].split("="),d[tmp2[0]]=tmp2[1];return d};c.utils.entity=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};
c.utils.unentity=function(a){return(""+a).replace(/&amp;/g,"&").replace(/&#x26;/g,"&").replace(/&#38;/g,"&").replace(/&lt;/g,"<").replace(/&#x3c;/g,"<").replace(/&#60;/g,"<").replace(/&gt;/g,">").replace(/&#x3e;/g,">").replace(/&#62;/g,">").replace(/&quout;/g,'"').replace(/&#x22;/g,'"').replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")};c.utils.unescape=h;l.f=c})(window,document,window);
(function(n){function j(){}j.prototype=function(){function l(g,i){if(!g)throw"INVALID EVENT TYPE "+g;var a=this.handlers||(this.handlers={}),e=[].concat(a[g]||[]),d=i||{},k,h,o;d.type||(d.type=g);for(h=0,k=e.length;h<k;++h)(o=e[h][0])&&o.call(e[h][1]||this,this,d);e=a["*"]||[];for(h=0,k=e.length;h<k;++h)(o=e[h][0])&&o.call(e[h][1]||this,this,d)}function j(g,i,a){if(!g)throw"addEventListener:INVALID EVENT TYPE "+g+" "+i;var e=this.handlers||(this.handlers={});(e[g]||(e[g]=[])).push([i,a])}function m(g,
i){if(!g)throw"removeEventListener:INVALID EVENT TYPE "+g+" "+fn;for(var a=(this.handlers||(this.handlers={}))[g]||[],e=a.length;e;)a[--e][0]===i&&a.splice(e,1)}return{dispatchEvent:l,trigger:l,pub:l,addEventListener:j,bind:j,sub:j,on:j,removeEventListener:m,unbind:m,off:m,one:function(g,i,a){function e(){d.removeEventListener(g,e,a);i.apply(a||d,arguments)}var d=this;this.addEventListener(g,e,a)}}}();n.events.EventDispatcher=j})(f,window,document,window);
(function(n){function j(a,e){this.init.apply(this,arguments)}function l(a,e){this.init.apply(this,arguments)}var p=0,m=n.events.EventDispatcher,g=n.utils,i=g.copyClone,g=g.extend;j.fn=j.prototype;i(j.prototype,m.prototype,{init:function(a,e){var d=$.isPlainObject(a)?a:{};this.id=d.id?d.id:"id"+ ++p;this.defaults&&i(d,this.defaults);this.set(d,{silent:true});this._previousAttributes=i({},this.attributes);$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},hasChanged:function(){return!isEmpty(this._changed)},
change:function(a){var e;a||(a={});if(this._changing||!this.hasChanged())return false;this._changing=true;if(!a.silent)for(e in this.trigger("change",this._changed),this._changed)a={},a[e]=this._changed[e],this.trigger("change:"+e,a);this._previousAttributes=i({},this.attributes);this._changed=null;delete this._changed;this._changing=false},set:function(a,e,d){var g,h,i=this.attributes||(this.attributes={});this._changed||(this._changed={});$.isPlainObject(a)?(h=a,d=e):(h={},h[a]=e);for(g in h)i[g]!==
h[g]&&(i[g]=h[g],this._changed[g]=h[g]);this.hasChanged()&&this.change(d)},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return i({},this._previousAttributes)},get:function(a){return this.attributes[a]}});l.fn=l.prototype;i(l.prototype,m.prototype,{tagName:"div",className:"",init:function(a,e){var d;d=$.isPlainObject(a)?a:{};var g,h,j;this.id=d.id?d.id:"id"+ ++p;this.events||(this.events=$.isPlainObject(d.events)?
d.events:{});i(this,d);this.el?this.setElement(d.el,false):(d=document.createElement(this.tagName),$(d).addClass(this.className),this.setElement(d,false));for(h in this.events)g=h.match(/^(\S+)\s*(.*)$/),d=g[1],g=g[2],j=this.events[h],$.isFunction(j)||(j=this[this.events[h]]),this.$el.delegate(g,d,$.proxy(j,this));$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},initialize:function(){},$:function(a){return this.$el.find(a)},setElement:function(a){this.$el=$(a);this.el=this.$el[0];
return this},render:function(){return this}});j.extend=l.extend=g;n.Model=j;n.View=l})(f,window,document,window);
