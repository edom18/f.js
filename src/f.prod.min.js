(function(o,k,m,p){function n(b,a){return r.hasOwnProperty.call(b,a)}function g(b){return q.call(b)==="[object Function]"}function i(b){return q.call(b)==="[object String]"}function a(b){return q.call(b)==="[object Number]"}function e(b){return b===null}function d(b){return b===p}function l(b){for(var a=u.slice.call(arguments,1),c=a.length,e=0,d,h;e<c;e++)for(h in d=a[e],d)b[h]=a[e][h];return b}function h(b){return b.replace(/\\\\/g,"\\").replace(/\\'/g,"'")}function j(b){var a=[],e,c={done:function(b){g(b)&&
(a?a.push(b):b(e))},resolve:function(b){var c=a,d=0,h=c.length;e=b;for(a=null;d<h;d++)c[d](b)}};b(c);return c}var r=Object.prototype,u=Array.prototype,q=r.toString;if(typeof Object.create!=="function")Object.create=function(b){function a(){}a.prototype=b;return new a};var c={utils:{},events:{},Model:{},View:{}},s=Array.isArray||function(b){return q.call(b)==="[object Array]"},t=new j(function(b){b.done(function(b){console.log(b)})});setTimeout(function(){t.resolve("hoge");t.done(function(){console.log("after hoge")})},
5E3);c.utils.Deferred=c.Deferred=j;c.utils.bind=c.bind=function(b,a){return function(){b.apply(a,arguments)}};c.utils.extend=c.extend=function(b,a){var c,e=function(){};c=function(b,a,c){var d;d=a&&n(a,"constructor")?a.constructor:function(){b.apply(this,arguments)};l(d,b);e.prototype=b.prototype;d.prototype=new e;a&&l(d.prototype,a);c&&l(d,c);d.prototype.constructor=d;d.__super__=b.prototype;return d}(this,b,a);c.extend=this.extend;return c};c.utils.copyClone=c.copyClone=l;c.utils.isFunction=c.isFunction=
g;c.utils.isString=c.isString=i;c.utils.isNumber=c.isNumber=a;c.utils.isArray=c.isArray=s;c.utils.isNull=c.isNull=e;c.utils.isUndefined=c.isUndefined=d;c.utils.isEmpty=c.isEmpty=function(b){var c;if(g(b))return false;else if(a(b))return false;else if(s(b)||i(b))return b.length===0;else if(e(b))return true;else if(d(b))return true;for(c in b)if(n(b,c))return false;return true};c.utils.hasProp=c.hasProp=n;c.utils.template=c.template=function(a,d,e){var g,l,i,j;e||(e={});i=/<%([\s\S]+?)%>/g;g=/<%=([\s\S]+?)%>/g;
l=/<%-([\s\S]+?)%>/g;a=["var __f = [];",e.throughErr?"try {":"","with (obj || {}) {__f.push('",function(a){a=a.replace(/\\/g,"\\\\");a=a.replace(/\'/g,"\\'");a=a.replace(g||noMatch,function(a,b){return"', f.utils.entity("+h(b)+"), '"});a=a.replace(l||noMatch,function(a,b){return"', "+h(b)+", '"});a=a.replace(i||noMatch,function(a,b){return"'); "+h(b).replace(/[\r\n\t]/g," ")+"; __f.push('"});a=a.replace(/\n/g,"\\n");a=a.replace(/\r/g,"\\r");return a=a.replace(/\t/g,"\\t")}(a),"');}",e.throughErr?
"} catch (e) {}":"",'return __f.join("");'].join("");j=new Function("obj","f",a);return d?j(d,c):function(a){return j.call(this,a,c)}};c.utils.getParams=function(a){var d={},c=0,e,a=a.split("&");for(e=a.length;c<e;c++)tmp2=a[c].split("="),d[tmp2[0]]=tmp2[1];return d};c.utils.entity=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};c.utils.unentity=function(a){return(""+a).replace(/&amp;/g,
"&").replace(/&#x26;/g,"&").replace(/&#38;/g,"&").replace(/&lt;/g,"<").replace(/&#x3c;/g,"<").replace(/&#60;/g,"<").replace(/&gt;/g,">").replace(/&#x3e;/g,">").replace(/&#62;/g,">").replace(/&quout;/g,'"').replace(/&#x22;/g,'"').replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")};c.utils.unescape=h;m.f=c})(window,document,window);
(function(o){function k(){}k.prototype=function(){function m(g,i){if(!g)throw"INVALID EVENT TYPE "+g;var a=this.handlers||(this.handlers={}),e=[].concat(a[g]||[]),d=i||{},l,h,j;d.type||(d.type=g);for(h=0,l=e.length;h<l;++h)(j=e[h][0])&&j.call(e[h][1]||this,this,d);e=a["*"]||[];for(h=0,l=e.length;h<l;++h)(j=e[h][0])&&j.call(e[h][1]||this,this,d)}function k(g,i,a){if(!g)throw"addEventListener:INVALID EVENT TYPE "+g+" "+i;var e=this.handlers||(this.handlers={});(e[g]||(e[g]=[])).push([i,a])}function n(g,
i){if(!g)throw"removeEventListener:INVALID EVENT TYPE "+g+" "+fn;for(var a=(this.handlers||(this.handlers={}))[g]||[],e=a.length;e;)a[--e][0]===i&&a.splice(e,1)}return{dispatchEvent:m,trigger:m,pub:m,addEventListener:k,bind:k,sub:k,on:k,removeEventListener:n,unbind:n,off:n,one:function(g,i,a){function e(){d.removeEventListener(g,e,a);i.apply(a||d,arguments)}var d=this;this.addEventListener(g,e,a)}}}();o.events.EventDispatcher=k})(f,window,document,window);
(function(o){function k(a,e){this.init.apply(this,arguments)}function m(a,e){this.init.apply(this,arguments)}var p=0,n=o.events.EventDispatcher,g=o.utils,i=g.copyClone,g=g.extend;k.fn=k.prototype;i(k.prototype,n.prototype,{init:function(a,e){var d=$.isPlainObject(a)?a:{};this.id=d.id?d.id:"id"+ ++p;this.defaults&&i(d,this.defaults);this.set(d,{silent:true});this._previousAttributes=i({},this.attributes);$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},hasChanged:function(){return!isEmpty(this._changed)},
change:function(a){var e;a||(a={});if(this._changing||!this.hasChanged())return false;this._changing=true;if(!a.silent)for(e in this.trigger("change",this._changed),this._changed)a={},a[e]=this._changed[e],this.trigger("change:"+e,a);this._previousAttributes=i({},this.attributes);this._changed=null;delete this._changed;this._changing=false},set:function(a,e,d){var g,h,i=this.attributes||(this.attributes={});this._changed||(this._changed={});$.isPlainObject(a)?(h=a,d=e):(h={},h[a]=e);for(g in h)i[g]!==
h[g]&&(i[g]=h[g],this._changed[g]=h[g]);this.hasChanged()&&this.change(d)},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return i({},this._previousAttributes)},get:function(a){return this.attributes[a]}});m.fn=m.prototype;i(m.prototype,n.prototype,{tagName:"div",className:"",init:function(a,e){var d;d=$.isPlainObject(a)?a:{};var g,h,j;this.id=d.id?d.id:"id"+ ++p;this.events||(this.events=$.isPlainObject(d.events)?
d.events:{});i(this,d);this.el?this.setElement(d.el,false):(d=document.createElement(this.tagName),$(d).addClass(this.className),this.setElement(d,false));for(h in this.events)g=h.match(/^(\S+)\s*(.*)$/),d=g[1],g=g[2],j=this.events[h],$.isFunction(j)||(j=this[this.events[h]]),this.$el.delegate(g,d,$.proxy(j,this));$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},initialize:function(){},$:function(a){return this.$el.find(a)},setElement:function(a){this.$el=$(a);this.el=this.$el[0];
return this},render:function(){return this}});k.extend=m.extend=g;o.Model=k;o.View=m})(f,window,document,window);
