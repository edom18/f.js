(function(o,k,m,p){function n(c,a){return r.hasOwnProperty.call(c,a)}function g(c){return q.call(c)==="[object Function]"}function i(c){return q.call(c)==="[object String]"}function a(c){return q.call(c)==="[object Number]"}function e(c){return c===null}function d(c){return c===p}function l(c){for(var a=s.slice.call(arguments,1),b=a.length,e=0,d,h;e<b;e++)for(h in d=a[e],d)c[h]=a[e][h];return c}function h(c){return c.replace(/\\\\/g,"\\").replace(/\\'/g,"'")}function j(c){var a=[],b,e={done:function(c){g(c)&&
(a?a.push(c):c(b))},resolve:function(c){var e=a,d=0,h=e.length;b=c;for(a=null;d<h;d++)e[d](c)}};g(c)&&c(e);return e}var r=Object.prototype,s=Array.prototype,u=s.slice,q=r.toString;if(typeof Object.create!=="function")Object.create=function(c){function a(){}a.prototype=c;return new a};var b={utils:{},events:{},Model:{},View:{}},t=Array.isArray||function(c){return q.call(c)==="[object Array]"};b.utils.Throttle=b.Throttle=function(c){var a,b;return{exec:function(e){var d=+new Date;if(!g(e))return false;
b?(clearTimeout(a),d-b>c?(e(),b=d):a=setTimeout(function(){e();a=null;b=d},c)):(e(),b=d)}}};b.utils.Deferred=b.Deferred=j;b.utils.when=b.when=function(c){function a(){--d||b.resolve()}for(var b=new j,e=c.length,d=e;e--;)c[e].done(a);return b};b.utils.makeArr=b.makeArr=function(c){return u.call(c)};b.utils.bind=b.bind=function(c,a){return function(){c.apply(a,arguments)}};b.utils.extend=b.extend=function(c,a){var b,e=function(){};b=function(a,c,b){var d;d=c&&n(c,"constructor")?c.constructor:function(){a.apply(this,
arguments)};l(d,a);e.prototype=a.prototype;d.prototype=new e;c&&l(d.prototype,c);b&&l(d,b);d.prototype.constructor=d;d.__super__=a.prototype;return d}(this,c,a);b.extend=this.extend;return b};b.utils.copyClone=b.copyClone=l;b.utils.isFunction=b.isFunction=g;b.utils.isString=b.isString=i;b.utils.isNumber=b.isNumber=a;b.utils.isArray=b.isArray=t;b.utils.isNull=b.isNull=e;b.utils.isUndefined=b.isUndefined=d;b.utils.isEmpty=b.isEmpty=function(c){var b;if(g(c))return false;else if(a(c))return false;else if(t(c)||
i(c))return c.length===0;else if(e(c))return true;else if(d(c))return true;for(b in c)if(n(c,b))return false;return true};b.utils.hasProp=b.hasProp=n;b.utils.template=b.template=function(a,e,d){var g,l,i,j;d||(d={});i=/<%([\s\S]+?)%>/g;g=/<%=([\s\S]+?)%>/g;l=/<%-([\s\S]+?)%>/g;a=["var __f = [];",d.throughErr?"try {":"","with (obj || {}) {__f.push('",function(a){a=a.replace(/\\/g,"\\\\");a=a.replace(/\'/g,"\\'");a=a.replace(g||noMatch,function(a,c){return"', f.utils.entity("+h(c)+"), '"});a=a.replace(l||
noMatch,function(a,c){return"', "+h(c)+", '"});a=a.replace(i||noMatch,function(a,c){return"'); "+h(c).replace(/[\r\n\t]/g," ")+"; __f.push('"});a=a.replace(/\n/g,"\\n");a=a.replace(/\r/g,"\\r");return a=a.replace(/\t/g,"\\t")}(a),"');}",d.throughErr?"} catch (e) {}":"",'return __f.join("");'].join("");j=new Function("obj","f",a);return e?j(e,b):function(a){return j.call(this,a,b)}};b.utils.getParams=function(a){var b={},d=0,e,a=a.split("&");for(e=a.length;d<e;d++)tmp2=a[d].split("="),b[tmp2[0]]=tmp2[1];
return b};b.utils.entity=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};b.utils.unentity=function(a){return(""+a).replace(/&amp;/g,"&").replace(/&#x26;/g,"&").replace(/&#38;/g,"&").replace(/&lt;/g,"<").replace(/&#x3c;/g,"<").replace(/&#60;/g,"<").replace(/&gt;/g,">").replace(/&#x3e;/g,">").replace(/&#62;/g,">").replace(/&quout;/g,'"').replace(/&#x22;/g,'"').replace(/&#34;/g,'"').replace(/&#39;/g,
"'").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")};b.utils.unescape=h;m.f=b})(window,document,window);
(function(o){function k(){}k.prototype=function(){function m(g,i){if(!g)throw"INVALID EVENT TYPE "+g;var a=this.handlers||(this.handlers={}),e=[].concat(a[g]||[]),d=i||{},l,h,j;d.type||(d.type=g);for(h=0,l=e.length;h<l;++h)(j=e[h][0])&&j.call(e[h][1]||this,this,d);e=a["*"]||[];for(h=0,l=e.length;h<l;++h)(j=e[h][0])&&j.call(e[h][1]||this,this,d)}function k(g,i,a){if(!g)throw"addEventListener:INVALID EVENT TYPE "+g+" "+i;var e=this.handlers||(this.handlers={});(e[g]||(e[g]=[])).push([i,a])}function n(g,
i){if(!g)throw"removeEventListener:INVALID EVENT TYPE "+g+" "+fn;for(var a=(this.handlers||(this.handlers={}))[g]||[],e=a.length;e;)a[--e][0]===i&&a.splice(e,1)}return{dispatchEvent:m,trigger:m,pub:m,addEventListener:k,bind:k,sub:k,on:k,removeEventListener:n,unbind:n,off:n,one:function(g,i,a){function e(){d.removeEventListener(g,e,a);i.apply(a||d,arguments)}var d=this;this.addEventListener(g,e,a)}}}();o.events.EventDispatcher=k})(f,window,document,window);
(function(o){function k(a,e){this.init.apply(this,arguments)}function m(a,e){this.init.apply(this,arguments)}var p=0,n=o.events.EventDispatcher,g=o.utils,i=g.copyClone,g=g.extend;k.fn=k.prototype;i(k.prototype,n.prototype,{init:function(a,e){var d=$.isPlainObject(a)?a:{};this.id=d.id?d.id:"id"+ ++p;this.defaults&&i(d,this.defaults);this.set(d,{silent:true});this._previousAttributes=i({},this.attributes);$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},hasChanged:function(){return!isEmpty(this._changed)},
change:function(a){var e;a||(a={});if(this._changing||!this.hasChanged())return false;this._changing=true;if(!a.silent)for(e in this.trigger("change",this._changed),this._changed)a={},a[e]=this._changed[e],this.trigger("change:"+e,a);this._previousAttributes=i({},this.attributes);this._changed=null;delete this._changed;this._changing=false},set:function(a,e,d){var g,h,i=this.attributes||(this.attributes={});this._changed||(this._changed={});$.isPlainObject(a)?(h=a,d=e):(h={},h[a]=e);for(g in h)i[g]!==
h[g]&&(i[g]=h[g],this._changed[g]=h[g]);this.hasChanged()&&this.change(d)},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return i({},this._previousAttributes)},get:function(a){return this.attributes[a]}});m.fn=m.prototype;i(m.prototype,n.prototype,{tagName:"div",className:"",init:function(a,e){var d;d=$.isPlainObject(a)?a:{};var g,h,j;this.id=d.id?d.id:"id"+ ++p;this.events||(this.events=$.isPlainObject(d.events)?
d.events:{});i(this,d);this.el?this.setElement(d.el,false):(d=document.createElement(this.tagName),$(d).addClass(this.className),this.setElement(d,false));for(h in this.events)g=h.match(/^(\S+)\s*(.*)$/),d=g[1],g=g[2],j=this.events[h],$.isFunction(j)||(j=this[this.events[h]]),this.$el.delegate(g,d,$.proxy(j,this));$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},initialize:function(){},$:function(a){return this.$el.find(a)},setElement:function(a){this.$el=$(a);this.el=this.$el[0];
return this},render:function(){return this}});k.extend=m.extend=g;o.Model=k;o.View=m})(f,window,document,window);
