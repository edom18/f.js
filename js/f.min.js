(function(o,l,k,m){function j(e,a){return r.hasOwnProperty.call(e,a)}function h(e){return p.call(e)==="[object Function]"}function g(e){return p.call(e)==="[object String]"}function a(e){return p.call(e)==="[object Number]"}function n(e){return e===null}function c(e){return e===m}function d(e){for(var a=s.slice.call(arguments,1),b=a.length,c=0,d,i;c<b;c++)for(i in d=a[c],d)e[i]=a[c][i];return e}function i(e){return e.replace(/\\\\/g,"\\").replace(/\\'/g,"'")}function q(e){var a=[],b,c={isResolved:function(){return!a},
done:function(e){h(e)&&(a?a.push(e):e(b));return this},resolve:function(e){if(a){var c=a,d=0,v=c.length;b=e;for(a=null;d<v;d++)c[d](e)}}};h(e)&&e(c);return c}function t(e){var a=new q,c=new q,b={resolve:function(){if(c.isResolved())return false;a.resolve.apply(null,arguments)},reject:function(){if(a.isResolved())return false;c.resolve.apply(null,arguments)},done:function(){a.done.apply(null,arguments);return this},fail:function(){c.done.apply(null,arguments);return this}};h(e)&&e(b);return b}var r=
Object.prototype,s=Array.prototype,w=s.slice,p=r.toString;if(typeof Object.create!=="function")Object.create=function(e){function a(){}a.prototype=e;return new a};var b={utils:{}},u=Array.isArray||function(e){return p.call(e)==="[object Array]"};b.utils.chain=b.chain=function(){function e(){var c=a.shift(),b=Array.prototype.slice.call(arguments);b.push(e);p.call(c)==="[object Function]"&&c.apply(c,b)}var a=Array.prototype.slice.call(arguments);e()};b.utils.Throttle=b.Throttle=function(e){var a,c;
return{exec:function(b){var d=+new Date;if(!h(b))return false;c?(clearTimeout(a),d-c>e?(b(),c=d):a=setTimeout(function(){b();a=null;c=d},e)):(b(),c=d)}}};b.utils.Deferred=b.Deferred=t;b.utils.when=b.when=function(e){function a(){--d||c.resolve()}for(var c=new t,b=e.length,d=b;b--;)e[b].done(a);return c};b.utils.makeArr=b.makeArr=function(a){return w.call(a)};b.utils.bind=b.bind=function(a,c){return function(){a.apply(c,arguments)}};b.utils.extend=b.extend=function(a,c){var b,i=function(){};b=function(a,
e,c){var b;b=e&&j(e,"constructor")?e.constructor:function(){a.apply(this,arguments)};d(b,a);i.prototype=a.prototype;b.prototype=new i;e&&d(b.prototype,e);c&&d(b,c);b.prototype.constructor=b;b.__super__=a.prototype;return b}(this,a,c);b.extend=this.extend;return b};b.utils.copyClone=b.copyClone=d;b.utils.isFunction=b.isFunction=h;b.utils.isString=b.isString=g;b.utils.isNumber=b.isNumber=a;b.utils.isArray=b.isArray=u;b.utils.isNull=b.isNull=n;b.utils.isUndefined=b.isUndefined=c;b.utils.isEmpty=b.isEmpty=
function(b){var d;if(h(b))return false;else if(a(b))return b===0;else if(u(b)||g(b))return b.length===0;else if(n(b))return true;else if(c(b))return true;else if(p.call(b)==="[object Boolean]")return!b;for(d in b)if(j(b,d))return false;return true};b.utils.hasProp=b.hasProp=j;b.utils.template=b.template=function(a,c,d){var n,h,q,g;d||(d={});q=/<%([\s\S]+?)%>/g;n=/<%=([\s\S]+?)%>/g;h=/<%-([\s\S]+?)%>/g;a=["var __f = [];",d.throughErr?"try {":"","with (obj || {}) {__f.push('",function(a){a=a.replace(/\\/g,
"\\\\");a=a.replace(/\'/g,"\\'");a=a.replace(n||noMatch,function(a,b){return"', f.utils.entity("+i(b)+"), '"});a=a.replace(h||noMatch,function(a,b){return"', "+i(b)+", '"});a=a.replace(q||noMatch,function(a,b){return"'); "+i(b).replace(/[\r\n\t]/g," ")+"; __f.push('"});a=a.replace(/\n/g,"\\n");a=a.replace(/\r/g,"\\r");return a=a.replace(/\t/g,"\\t")}(a),"');}",d.throughErr?"} catch (e) {}":"",'return __f.join("");'].join("");g=new Function("obj","f",a);return c?g(c,b):function(a){return g.call(this,
a,b)}};b.utils.getParams=function(a){var b={},c=0,d,a=a.split("&");for(d=a.length;c<d;c++)tmp2=a[c].split("="),b[tmp2[0]]=tmp2[1];return b};b.utils.entity=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};b.utils.unentity=function(a){return(""+a).replace(/&amp;/g,"&").replace(/&#x26;/g,"&").replace(/&#38;/g,"&").replace(/&lt;/g,"<").replace(/&#x3c;/g,"<").replace(/&#60;/g,"<").replace(/&gt;/g,
">").replace(/&#x3e;/g,">").replace(/&#62;/g,">").replace(/&quout;/g,'"').replace(/&#x22;/g,'"').replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")};b.utils.unescape=i;k.f=b})(window,document,window);
(function(o,l,k){function m(){}m.prototype=function(){function j(a,n){if(!a)throw"INVALID EVENT TYPE "+a;var c=this.handlers||(this.handlers={}),d=[].concat(c[a]||[]),i=n||{},h,g,j;i.type||(i.type=a);for(g=0,h=d.length;g<h;++g)(j=d[g][0])&&j.call(d[g][1]||this,this,i);d=c["*"]||[];for(g=0,h=d.length;g<h;++g)(j=d[g][0])&&j.call(d[g][1]||this,this,i)}function h(a,g,c){if(!a)throw"addEventListener:INVALID EVENT TYPE "+a+" "+g;var d=this.handlers||(this.handlers={});(d[a]||(d[a]=[])).push([g,c])}function g(a,
g){if(!a)throw"removeEventListener:INVALID EVENT TYPE "+a+" "+fn;for(var c=(this.handlers||(this.handlers={}))[a]||[],d=c.length;d;)c[--d][0]===g&&c.splice(d,1)}return{dispatchEvent:j,trigger:j,pub:j,addEventListener:h,bind:h,sub:h,on:h,removeEventListener:g,unbind:g,off:g,one:function(a,g,c){function d(){i.removeEventListener(a,d,c);g.apply(c||i,arguments)}var i=this;this.addEventListener(a,d,c)}}}();k.f.events.EventDispatcher=m})(window,window.document,window);
(function(o){function l(a,g){this.init.apply(this,arguments)}function k(a,g){this.init.apply(this,arguments)}var m=0,j=o.events.EventDispatcher,h=o.utils,g=h.copyClone,h=h.extend;l.fn=l.prototype;g(l.prototype,j.prototype,{init:function(a,h){var c=$.isPlainObject(a)?a:{};this.id=c.id?c.id:"id"+ ++m;this.defaults&&g(c,this.defaults);this.set(c,{silent:true});this._previousAttributes=g({},this.attributes);$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},hasChanged:function(){return!isEmpty(this._changed)},
change:function(a){var h;a||(a={});if(this._changing||!this.hasChanged())return false;this._changing=true;if(!a.silent)for(h in this.trigger("change",this._changed),this._changed)a={},a[h]=this._changed[h],this.trigger("change:"+h,a);this._previousAttributes=g({},this.attributes);this._changed=null;delete this._changed;this._changing=false},set:function(a,g,c){var d,i,h=this.attributes||(this.attributes={});this._changed||(this._changed={});$.isPlainObject(a)?(i=a,c=g):(i={},i[a]=g);for(d in i)h[d]!==
i[d]&&(h[d]=i[d],this._changed[d]=i[d]);this.hasChanged()&&this.change(c)},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return g({},this._previousAttributes)},get:function(a){return this.attributes[a]}});k.fn=k.prototype;g(k.prototype,j.prototype,{tagName:"div",className:"",init:function(a,h){var c;c=$.isPlainObject(a)?a:{};var d,i,j;this.id=c.id?c.id:"id"+ ++m;this.events||(this.events=$.isPlainObject(c.events)?
c.events:{});g(this,c);this.el?this.setElement(c.el,false):(c=document.createElement(this.tagName),$(c).addClass(this.className),this.setElement(c,false));for(i in this.events)d=i.match(/^(\S+)\s*(.*)$/),c=d[1],d=d[2],j=this.events[i],$.isFunction(j)||(j=this[this.events[i]]),this.$el.delegate(d,c,$.proxy(j,this));$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},initialize:function(){},$:function(a){return this.$el.find(a)},setElement:function(a){this.$el=$(a);this.el=this.$el[0];
return this},render:function(){return this}});l.extend=k.extend=h;o.Model=l;o.View=k})(f,window,document,window);
