(function(q,o,n,p){function m(a,c){return s.hasOwnProperty.call(a,c)}function j(a){return r.call(a)==="[object Function]"}function k(a){return r.call(a)==="[object String]"}function h(a){return r.call(a)==="[object Number]"}function d(a){return a===null}function e(a){return a===p}function c(a){for(var c=t.slice.call(arguments,1),b=c.length,d=0,e,g;d<b;d++)for(g in e=c[d],e)a[g]=c[d][g];return a}function g(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")}function l(a){var c=[],d,b={isResolved:function(){return!c},
done:function(a){j(a)&&(c?c.push(a):a(d));return this},resolve:function(a){if(c){var b=c,e=0,g=b.length;d=a;for(c=null;e<g;e++)b[e](a)}}};j(a)&&a(b);return b}function i(a){var c=new l,b=new l,d={resolve:function(){if(b.isResolved())return false;c.resolve.apply(null,arguments)},reject:function(){if(c.isResolved())return false;b.resolve.apply(null,arguments)},done:function(){c.done.apply(null,arguments);return this},fail:function(){b.done.apply(null,arguments);return this}};j(a)&&a(d);return d}var s=
Object.prototype,t=Array.prototype,v=t.slice,r=s.toString;if(typeof Object.create!=="function")Object.create=function(a){function c(){}c.prototype=a;return new c};var b={utils:{}},u=Array.isArray||function(a){return r.call(a)==="[object Array]"};b.utils.chain=b.chain=function(){function a(){var b=c.shift(),d=Array.prototype.slice.call(arguments);d.push(a);r.call(b)==="[object Function]"&&b.apply(b,d)}var c=Array.prototype.slice.call(arguments);a()};b.utils.Throttle=b.Throttle=function(a){var c,b;
return{exec:function(d){var e=+new Date;if(!j(d))return false;b?(clearTimeout(c),e-b>a?(d(),b=e):c=setTimeout(function(){d();c=null;b=e},a)):(d(),b=e)}}};b.utils.Deferred=b.Deferred=i;b.utils.when=b.when=function(a){function c(){--e||b.resolve()}for(var b=new i,d=a.length,e=d;d--;)a[d].done(c);return b};b.utils.makeArr=b.makeArr=function(a){return v.call(a)};b.utils.bind=b.bind=function(a,c){return function(){a.apply(c,arguments)}};b.utils.extend=b.extend=function(a,b){var d,e=function(){};d=function(a,
b,d){var g;g=b&&m(b,"constructor")?b.constructor:function(){a.apply(this,arguments)};c(g,a);e.prototype=a.prototype;g.prototype=new e;b&&c(g.prototype,b);d&&c(g,d);g.prototype.constructor=g;g.__super__=a.prototype;return g}(this,a,b);d.extend=this.extend;return d};b.utils.copyClone=b.copyClone=c;b.utils.isFunction=b.isFunction=j;b.utils.isString=b.isString=k;b.utils.isNumber=b.isNumber=h;b.utils.isArray=b.isArray=u;b.utils.isNull=b.isNull=d;b.utils.isUndefined=b.isUndefined=e;b.utils.isEmpty=b.isEmpty=
function(a){var b;if(j(a))return false;else if(h(a))return a===0;else if(u(a)||k(a))return a.length===0;else if(d(a))return true;else if(e(a))return true;else if(r.call(a)==="[object Boolean]")return!a;for(b in a)if(m(a,b))return false;return true};b.utils.hasProp=b.hasProp=m;b.utils.template=b.template=function(a,c,d){var e,h,i,l;d||(d={});i=/<%([\s\S]+?)%>/g;e=/<%=([\s\S]+?)%>/g;h=/<%-([\s\S]+?)%>/g;a=["var __f = [];",d.throughErr?"try {":"","with (obj || {}) {__f.push('",function(a){a=a.replace(/\\/g,
"\\\\");a=a.replace(/\'/g,"\\'");a=a.replace(e||noMatch,function(a,b){return"', f.utils.entity("+g(b)+"), '"});a=a.replace(h||noMatch,function(a,b){return"', "+g(b)+", '"});a=a.replace(i||noMatch,function(a,b){return"'); "+g(b).replace(/[\r\n\t]/g," ")+"; __f.push('"});a=a.replace(/\n/g,"\\n");a=a.replace(/\r/g,"\\r");return a=a.replace(/\t/g,"\\t")}(a),"');}",d.throughErr?"} catch (e) {}":"",'return __f.join("");'].join("");l=new Function("obj","f",a);return c?l(c,b):function(a){return l.call(this,
a,b)}};b.utils.getParams=function(a){var b={},c=0,d,a=a.split("&");for(d=a.length;c<d;c++)tmp2=a[c].split("="),b[tmp2[0]]=tmp2[1];return b};b.utils.entity=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};b.utils.unentity=function(a){return(""+a).replace(/&amp;/g,"&").replace(/&#x26;/g,"&").replace(/&#38;/g,"&").replace(/&lt;/g,"<").replace(/&#x3c;/g,"<").replace(/&#60;/g,"<").replace(/&gt;/g,
">").replace(/&#x3e;/g,">").replace(/&#62;/g,">").replace(/&quout;/g,'"').replace(/&#x22;/g,'"').replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")};b.utils.unescape=g;n.f=b})(window,document,window);
(function(q,o,n){function p(){}p.prototype=function(){function m(h,d){if(!h)throw"INVALID EVENT TYPE "+h;var e=this.handlers||(this.handlers={}),c=[].concat(e[h]||[]),g=d||{},l,i,j;g.type||(g.type=h);for(i=0,l=c.length;i<l;++i)(j=c[i][0])&&j.call(c[i][1]||this,this,g);c=e["*"]||[];for(i=0,l=c.length;i<l;++i)(j=c[i][0])&&j.call(c[i][1]||this,this,g)}function j(h,d,e){if(!h)throw"addEventListener:INVALID EVENT TYPE "+h+" "+d;var c=this.handlers||(this.handlers={});(c[h]||(c[h]=[])).push([d,e])}function k(h,
d){if(!h)throw"removeEventListener:INVALID EVENT TYPE "+h+" "+fn;for(var e=(this.handlers||(this.handlers={}))[h]||[],c=e.length;c;)e[--c][0]===d&&e.splice(c,1)}return{dispatchEvent:m,trigger:m,pub:m,addEventListener:j,bind:j,sub:j,on:j,removeEventListener:k,unbind:k,off:k,one:function(h,d,e){function c(){g.removeEventListener(h,c,e);d.apply(e||g,arguments)}var g=this;this.addEventListener(h,c,e)}}}();n.f.events={EventDispatcher:p}})(window,window.document,window);
(function(q){function o(d,e){this.init.apply(this,arguments)}function n(d,e){this.init.apply(this,arguments)}var p=0,m=q.events.EventDispatcher,j=q.utils,k=j.copyClone,h=j.extend;o.fn=o.prototype;k(o.prototype,m.prototype,{init:function(d,e){var c=$.isPlainObject(d)?d:{};this.id=c.id?c.id:"id"+ ++p;this.defaults&&k(c,this.defaults);this.set(c,{silent:true});this._previousAttributes=k({},this.attributes);$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},hasChanged:function(){return!j.isEmpty(this._changed)},
change:function(d){var e;d||(d={});if(this._changing||!this.hasChanged())return false;this._changing=true;if(!d.silent)for(e in this.trigger("change",this._changed),this._changed)d={},d[e]=this._changed[e],this.trigger("change:"+e,d);this._previousAttributes=k({},this.attributes);this._changed=null;delete this._changed;this._changing=false},set:function(d,e,c){var g,h,i=this.attributes||(this.attributes={});this._changed||(this._changed={});$.isPlainObject(d)?(h=d,c=e):(h={},h[d]=e);for(g in h)i[g]!==
h[g]&&(i[g]=h[g],this._changed[g]=h[g]);this.hasChanged()&&this.change(c)},previous:function(d){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[d]},previousAttributes:function(){return k({},this._previousAttributes)},get:function(d){return this.attributes[d]}});n.fn=n.prototype;k(n.prototype,m.prototype,{tagName:"div",className:"",init:function(d,e){var c;c=$.isPlainObject(d)?d:{};var g,h,i;this.id=c.id?c.id:"id"+ ++p;this.events||(this.events=$.isPlainObject(c.events)?
c.events:{});k(this,c);this.el?this.setElement(c.el,false):(c=document.createElement(this.tagName),$(c).addClass(this.className),this.setElement(c,false));for(h in this.events)g=h.match(/^(\S+)\s*(.*)$/),c=g[1],g=g[2],i=this.events[h],$.isFunction(i)||(i=this[this.events[h]]),this.$el.delegate(g,c,$.proxy(i,this));$.isFunction(this.initialize)&&this.initialize.apply(this,arguments)},initialize:function(){},$:function(d){return this.$el.find(d)},setElement:function(d){this.$el=$(d);this.el=this.$el[0];
return this},render:function(){return this}});o.extend=n.extend=h;q.Model=o;q.View=n})(f,window,document,window);
